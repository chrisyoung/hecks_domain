domain :SoccerSeason do
  aggregate :Matches do
    head :Match do
      value(:fixture).as :Fixture
      optional list(:goals).as(:Goal)
      optional entity(:result).as :Result
      list(:teams).as Teams: :Team
      entity(:pitch).as :Pitch
    end

    value(:Result) do
      entity(:loser).as Teams: :Team
      entity(:winner).as Teams: :Team
      read_only boolean(:tied)
    end

    value(:TiedResult) do
    end

    value(:Goal) do
      string :time
      entity(:player).as Players: :Player
    end

    value(:Fixture) do
      string :season
      string :date
      string :time
    end

    value(:Pitch) do
      string :name
    end
  end

  aggregate :Teams do
    head(:Team) { string :name }
  end

  aggregate :Players do
    head(:Player) do
      string :name
      entity(:team).as Teams: :Team
    end
  end

  aggregate :Pitches do
    head(:Pitch) do
      string :name
    end
  end
end
