require_relative '<%= folder_name %>/factories'
<% if is_a?(Entity) %>
require_relative '<%= folder_name %>/repository'
<% end %>

module <%= @aggregate.domain.name %>
  module <%= @aggregate.name %>
    class <%= @name %>
      include Helpers::FactoryLoader
      <%= 'include Helpers::Repository' if is_a?(Entity) %>
      attr_reader <%= ':id, ' if is_a?(Entity) %><%= @fields.map { |field| ':' + field.name.to_s }.join(', ') %>

      def initialize <%= @fields.map { |field| field.attribute_name}.join(', ') %>
        <% @fields.each do |field| %>
        @<%= field.name %> = <%= field.name %>
        <% end %>
      end
    end
  end
end